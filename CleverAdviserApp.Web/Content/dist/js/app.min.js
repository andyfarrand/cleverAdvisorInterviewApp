var App;!function(t){var n=angular.module("app",["angular-momentjs","daterangepicker","ui.bootstrap","ui.router","angular-loading-bar"]);n.config(["$locationProvider",function(t){t.html5Mode(!0)}]),n.run(["$rootScope",function(t){t.$on("$stateChangeStart",function(t,n,e,r,i){$(".page-loading").removeClass("hidden")}),t.$on("$stateChangeSuccess",function(t,n,e,r,i){$(".page-loading").addClass("hidden")})}])}(App||(App={}));var App;!function(t){angular.module("app").config(["$stateProvider",function(t){var n=[{name:"home",url:"/",component:"home"},{name:"investors",url:"/investors",component:"investors",resolve:{investors:["investorApiService",function(t){return t.get()}]}},{name:"accounts",url:"/investors/{id}",component:"accounts",resolve:{investor:["investorApiService","$stateParams",function(t,n){return t.getById(n.id)}]}}];n.forEach(function(n){t.state(n)})}])}(App||(App={})),angular.module("app").run(["$templateCache",function(t){t.put("Components/app.template.html",'<div id="main-banner">\r\n    <div class="overlay"> \r\n        <h1>Clever Adviser</h1>\r\n    </div>\r\n</div>\r\n<nav class="navbar navbar-default">\r\n    <div class="container">\r\n        <ul class="nav navbar-nav">\r\n            <li ui-sref-active="active">\r\n                <a ui-sref="home">Home</a>\r\n            </li>\r\n            <li ui-sref-active="active">\r\n                <a ui-sref="investors">Investors</a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n</nav>\r\n\r\n\r\n<div class="container">\r\n    <ui-view></ui-view>\r\n</div>\r\n<div class="page-loading hidden">\r\n    <div class="sk-circle">\r\n        <div class="sk-circle1 sk-child"></div>\r\n        <div class="sk-circle2 sk-child"></div>\r\n        <div class="sk-circle3 sk-child"></div>\r\n        <div class="sk-circle4 sk-child"></div>\r\n        <div class="sk-circle5 sk-child"></div>\r\n        <div class="sk-circle6 sk-child"></div>\r\n        <div class="sk-circle7 sk-child"></div>\r\n        <div class="sk-circle8 sk-child"></div>\r\n        <div class="sk-circle9 sk-child"></div>\r\n        <div class="sk-circle10 sk-child"></div>\r\n        <div class="sk-circle11 sk-child"></div>\r\n        <div class="sk-circle12 sk-child"></div>\r\n    </div>\r\n</div>\r\n\r\n'),t.put("Components/Accounts/accounts-list.template.html",'<div class="table-responsive account-table">\r\n    <div class="sort-row">\r\n        <div class="result-counts">\r\n            Showing {{($ctrl.currentPage-1)*$ctrl.perPage + 1}} to {{($ctrl.currentPage-1)*$ctrl.perPage + $ctrl.perPage }} of {{filtered.length}} results\r\n            <span ng-if="filtered.length < $ctrl.accounts.length"> ({{$ctrl.accounts.length - filtered.length}} hidden by filters)</span>\r\n        </div>\r\n        <div class="sort-label">\r\n            Sort By:\r\n        </div>\r\n        <div class="sort-select">\r\n            <select class="form-control"\r\n                    ng-options="option.label for option in $ctrl.sorts track by option.label"\r\n                    ng-model="$ctrl.selectedSort"\r\n                    ng-change="$ctrl.currentPage = 1"></select>\r\n        </div>\r\n    </div>\r\n    <table class="table table-striped table-hover">\r\n        <thead>\r\n            <tr>\r\n                <th>\r\n                   Account Id\r\n                </th>\r\n                <th>\r\n                    Type\r\n                </th>\r\n                <th>\r\n                    Date Created\r\n                </th>\r\n\r\n                <th>\r\n                    Amount Held\r\n                </th>\r\n            </tr>\r\n            <tr class="filter-row">\r\n                <td>\r\n                    <div class="input-group">\r\n                        <input type="text" class="form-control" ng-model="$ctrl.idFilter" />\r\n                        <span class="input-group-btn">\r\n                            <button class="btn btn-danger" ng-click="$ctrl.idFilter = null">&times;</button>\r\n                        </span>\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <div class="input-group">\r\n                        <select class="form-control" ng-options="option for option in $ctrl.accountTypeList" ng-model="$ctrl.accountTypeFilter">\r\n                            <option value="" label="" selected></option>\r\n                        </select>\r\n                        <span class="input-group-btn">\r\n                            <button class="btn btn-danger" ng-click="$ctrl.clearAccountType()">&times;</button>\r\n                        </span>\r\n                    </div>\r\n                </td>\r\n\r\n                <td>\r\n                    <div class="input-group">\r\n                        <input type="text" date-range-picker class="form-control date-picker" ng-model="$ctrl.dateFilter" />\r\n                        <span class="input-group-btn">\r\n                            <button class="btn btn-danger" ng-click="$ctrl.clearCalendar()">&times;</button>\r\n                        </span>\r\n                    </div>\r\n                </td>\r\n\r\n                <td>\r\n                    <div class="input-group">\r\n                        <select id="investmentSelect" name="investmentSelect" \r\n                                ng-options="option.display for option in $ctrl.investmentAmounts track by option.min"\r\n                                ng-model="$ctrl.investmentAmountSelectedFilter" class="form-control">\r\n                            <option value="" label="" selected></option>\r\n                        </select>\r\n                        <span class="input-group-btn">\r\n                            <button class="btn btn-danger" ng-click="$ctrl.clearInvested()">&times;</button>\r\n                        </span>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr ng-repeat="account in paged = (filtered = ($ctrl.accounts | orderBy: $ctrl.selectedSort.predicate:$ctrl.selectedSort.sortReverse | filter: $ctrl.applyFilters ) | startFrom: (($ctrl.currentPage-1)*$ctrl.perPage) | limitTo: $ctrl.perPage ) ">\r\n                <td>\r\n                    {{::account.accountId}}\r\n                </td>\r\n                <td>\r\n                    {{::account.type }}\r\n                </td>\r\n                <td>\r\n                    {{::account.dateCreated | convertToDate | date: "dd MMM yyyy"}}\r\n                </td>\r\n                <td>\r\n                    {{::account.amountHeld | currency: "£":2}}\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n    <ul uib-pagination total-items="filtered.length" ng-model="$ctrl.currentPage"></ul>\r\n</div>\r\n\r\n'),t.put("Components/Accounts/accounts.template.html",'<div>\r\n    <h2>Accounts</h2>\r\n    <div> Investor: {{$ctrl.investor.name}} {{$ctrl.investor.surname}}</div>\r\n    <div> Total Amount Invested: {{$ctrl.investor.totalInvested | currency:"£":2}}</div>\r\n    <hr />\r\n    <account-list accounts="$ctrl.investor.accounts"></account-list>\r\n</div>'),t.put("Components/Home/home.template.html","<div>\r\n    <h2>Home Page</h2>\r\n    <div>Welcome to the Clever Adviser Investers Application. To view investors click the ink in the navigation bar</div>\r\n</div>"),t.put("Components/Investors/investor-list.template.html",'<div class="table-responsive investor-table">\r\n   <div class="sort-row">\r\n        <div class="result-counts">\r\n            Showing {{($ctrl.currentPage-1)*$ctrl.perPage + 1}} to {{($ctrl.currentPage-1)*$ctrl.perPage + $ctrl.perPage }} of {{filtered.length}} results\r\n            <span ng-if="filtered.length < $ctrl.investors.length"> ({{$ctrl.investors.length - filtered.length}} hidden by filters)</span>\r\n        </div>\r\n        <div class="sort-label">\r\n            Sort By:\r\n        </div>\r\n        <div class="sort-select">\r\n            <select class="form-control"\r\n                    ng-options="option.label for option in $ctrl.sorts track by option.label"\r\n                    ng-model="$ctrl.selectedSort"\r\n                    ng-change="$ctrl.currentPage = 1"></select>\r\n        </div>\r\n    </div>\r\n    <table class="table table-striped table-hover">\r\n        <thead>\r\n            <tr>\r\n                <th>\r\n                    Investor Id\r\n                </th>\r\n                <th>\r\n                    Name\r\n                </th>\r\n                <th>\r\n                    Surname\r\n                </th>\r\n                <th>\r\n                    Date Created\r\n                </th>\r\n                <th>\r\n                   Accounts\r\n                </th>\r\n                <th>\r\n                    Total Invested\r\n                </th>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    <div class="input-group">\r\n                        <input type="text" class="form-control" ng-model="$ctrl.idFilter" style="max-width:50px"/>\r\n                        <span class="input-group-btn">\r\n                            <button class="btn btn-danger" ng-click="$ctrl.idFilter = null">&times;</button>\r\n                        </span>\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <div class="input-group">\r\n                        <input type="text" class="form-control" ng-model="$ctrl.nameFilter" />\r\n                        <span class="input-group-btn">\r\n                            <button class="btn btn-danger" ng-click="$ctrl.nameFilter= null">&times;</button>\r\n                        </span>\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <div class="input-group">\r\n                        <input type="text" class="form-control" ng-model="$ctrl.surnameFilter" />\r\n                        <span class="input-group-btn">\r\n                            <button class="btn btn-danger" ng-click="$ctrl.surnameFilter = null">&times;</button>\r\n                        </span>\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <div class="input-group">\r\n                        <input type="text" date-range-picker class="form-control date-picker" ng-model="$ctrl.dateFilter" />\r\n                        <span class="input-group-btn">\r\n                            <button class="btn btn-danger" ng-click="$ctrl.clearCalendar($event)">&times;</button>\r\n                        </span>\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <div class="input-group">\r\n                        <select class="form-control" ng-options="option for option in $ctrl.numOfAccountsList" ng-model="$ctrl.numOfAccountsFilter" style="min-width:62px">\r\n                            <option value="" label="" selected></option>\r\n                        </select>\r\n                        <span class="input-group-btn">\r\n                            <button class="btn btn-danger" ng-click="$ctrl.clearAccounts()">&times;</button>\r\n                        </span>\r\n                    </div>\r\n                </td>\r\n                <td>\r\n                    <div class="input-group">\r\n                        <select id="investmentSelect" name="investmentSelect" style="min-width:120px"\r\n                                 ng-options="option.display for option in $ctrl.investmentAmounts track by option.min"\r\n                                 ng-model="$ctrl.investmentAmountSelectedFilter" class="form-control">\r\n                            <option value="" label="" selected></option>\r\n                        </select>\r\n                        <span class="input-group-btn">\r\n                            <button class="btn btn-danger" ng-click="$ctrl.clearInvested()">&times;</button>\r\n                        </span>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr class="selectable" ui-sref="accounts({id: investor.investorId})" ng-repeat="investor in paged = (filtered = ($ctrl.investors | orderBy: $ctrl.selectedSort.predicate:$ctrl.selectedSort.sortReverse | filter: $ctrl.applyFilters ) | startFrom: (($ctrl.currentPage-1)*$ctrl.perPage) | limitTo: $ctrl.perPage ) ">\r\n                <td>\r\n                    {{::investor.investorId}}\r\n                </td>\r\n                <td>\r\n                    {{::investor.name}}\r\n                </td>\r\n                <td>\r\n                    {{::investor.surname}}\r\n                </td>\r\n                <td>\r\n                    {{::investor.dateCreated | convertToDate | date: "dd MMM yyyy"}}\r\n                </td>\r\n                <td>\r\n                    {{::investor.numberOfAccounts}}\r\n                </td>\r\n                <td>\r\n                    {{::investor.totalInvested | currency: "£":2}}\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n    <ul uib-pagination total-items="filtered.length" ng-model="$ctrl.currentPage"></ul>\r\n</div>\r\n'),t.put("Components/Investors/investors.template.html",'<div>\r\n    <h2>Investors</h2>\r\n    <p>Select an investor from the list to view more details.</p>\r\n    <investor-list investors="$ctrl.investors"></investor-list>\r\n</div>\r\n\r\n\r\n')}]);var App;!function(t){var n=function(){function t(){this.bindings={},this.controller=e,this.templateUrl="Components/app.template.html"}return t}(),e=function(){function t(){}return t}();angular.module("app").component("app",new n)}(App||(App={}));var App;!function(t){var n=function(){function t(){}return t.factory=function(){var t=function(t){return function(n){return t.convertJsonDateToJSDate(n)}};return t.$inject=["utility"],t},t}();angular.module("app").filter("convertToDate",n.factory())}(App||(App={}));var App;!function(t){angular.module("app").filter("startFrom",function(){return function(t,n){return t?(n=+n,t.slice(n)):[]}})}(App||(App={}));var App;!function(t){var n=function(){function t(t,n){this.$http=t,this.$q=n}return t.prototype.get=function(){console.log("get called");var t=this.$q.defer();return this.$http.get("/api/investors",{cache:!0}).then(function(n){console.log("result:",n),t.resolve(n.data)}).catch(function(n){t.reject(n)}),t.promise},t.prototype.getById=function(t){var n=this.$q.defer();return this.get().then(function(e){var r=e.filter(function(n){return n.investorId===+t});r.length>0?n.resolve(r[0]):n.reject()}),n.promise},t}();n.$inject=["$http","$q"],angular.module("app").service("investorApiService",n)}(App||(App={}));var App;!function(t){var n=function(){function t(t){this.moment=t}return t.prototype.convertJsonDateToJSDate=function(t){return this.moment(t).toDate()},t}();n.$inject=["MomentJS"],t.Utility=n,angular.module("app").service("utility",n)}(App||(App={}));var App;!function(t){var n=function(){function t(){this.bindings={accounts:"<"},this.controller=e,this.templateUrl="Components/Accounts/accounts-list.template.html"}return t}(),e=function(){function t(t,n,e){var r=this;this.utility=t,this.$timeout=n,this.moment=e,this.sorts=[],this.filters=[],this.dateFilter={startDate:null,endDate:null},this.investmentAmountSelectedFilter=null,this.accountTypeFilter=null,this.accountTypeList=[],this.investmentAmounts=[],this.currentPage=1,this.perPage=10,this.$onInit=function(){r.setupFilters(),r.setupSorts()},this.applyFilters=function(t){return Object.keys(r.filters).reduce(function(n,e){return r.filters[e](t)||(n=!1),n},!0)}}return t.prototype.setupFilters=function(){var t=this;this.filters.idFilter=function(n){return!t.idFilter||n.accountId===+t.idFilter},this.filters.daterangeFilter=function(n){if(null===!t.dateFilter.startDate||null===t.dateFilter.endDate)return!0;var e=t.moment(n.dateCreated).toDate();return t.dateFilter.startDate.toDate()<=e&&t.dateFilter.endDate.toDate()>=e};for(var n=this.accounts.reduce(function(t,n){return n.amountHeld>t?n.amountHeld:t},0),e=Math.ceil(n/5e3),r=0;r<e;r++)this.investmentAmounts.push({min:5e3*r,max:5e3*(r+1),display:5*r+"k - "+5*(r+1)+"k"});this.filters.investmentAmountFilter=function(n){return 0===t.investmentAmounts.length||(null===t.investmentAmountSelectedFilter||""===t.investmentAmountSelectedFilter||n.amountHeld>=t.investmentAmountSelectedFilter.min&&n.amountHeld<=t.investmentAmountSelectedFilter.max)},this.accountTypeList=this.accounts.map(function(t){return t.type}).filter(function(t,n,e){return e.indexOf(t)===n}).sort(),this.filters.accountType=function(n){return null===t.accountTypeFilter||""===t.accountTypeFilter||t.accountTypeFilter===n.type}},t.prototype.setupSorts=function(){this.sorts.push({label:"Id",predicate:function(t){return t.accountId},sortReverse:!1}),this.sorts.push({label:"Date (ascending)",predicate:function(t){return t.dateCreated},sortReverse:!1}),this.sorts.push({label:"Date (descending)",predicate:function(t){return t.dateCreated},sortReverse:!0}),this.sorts.push({label:"Ammount Held (ascending)",predicate:function(t){return t.amountHeld},sortReverse:!1}),this.sorts.push({label:"Amount Held (descending)",predicate:function(t){return t.amountHeld},sortReverse:!0}),this.selectedSort=this.sorts.filter(function(t){return"Id"==t.label})[0]},t.prototype.clearCalendar=function(){var t=this;this.$timeout(function(){angular.element("[date-range-picker]").val(null),t.dateFilter={startDate:null,endDate:null}})},t.prototype.clearAccountType=function(){this.accountTypeFilter=null},t.prototype.clearInvested=function(){this.investmentAmountSelectedFilter=null},t}();e.$inject=["utility","$timeout","MomentJS"],angular.module("app").component("accountList",new n)}(App||(App={}));var App;!function(t){var n=function(){function t(){this.bindings={investor:"<"},this.controller=e,this.templateUrl="Components/Accounts/accounts.template.html"}return t}(),e=function(){function t(){}return t}();angular.module("app").component("accounts",new n)}(App||(App={}));var App;!function(t){var n=function(){function t(){this.bindings={},this.controller=e,this.templateUrl="Components/Home/home.template.html"}return t}(),e=function(){function t(){}return t}();angular.module("app").component("home",new n)}(App||(App={}));var App;!function(t){var n=function(){function t(){this.bindings={investors:"<"},this.controller=e,this.templateUrl="Components/Investors/investor-list.template.html"}return t}(),e=function(){function t(t,n){var e=this;this.utility=t,this.$timeout=n,this.$onInit=function(){console.log("list:",e.investors),e.setupFilters(),e.setupSorts()},this.moment=window.moment,this.sorts=[],this.filters=[],this.investmentAmounts=[],this.investmentAmountSelectedFilter=null,this.numOfAccountsFilter=null,this.numOfAccountsList=[],this.dateFilter={startDate:null,endDate:null},this.currentPage=1,this.perPage=10,this.applyFilters=function(t){return Object.keys(e.filters).reduce(function(n,r){return e.filters[r](t)||(n=!1),n},!0)}}return t.prototype.setupSorts=function(){this.sorts.push({label:"Id",predicate:function(t){return t.investorId},sortReverse:!1}),this.sorts.push({label:"Name (ascending)",predicate:function(t){return t.name},sortReverse:!1}),this.sorts.push({label:"Name (descending)",predicate:function(t){return t.name},sortReverse:!0}),this.sorts.push({label:"Surname (ascending)",predicate:function(t){return t.surname},sortReverse:!1}),this.sorts.push({label:"Surname (descending)",predicate:function(t){return t.surname},sortReverse:!0}),this.sorts.push({label:"Date (ascending)",predicate:function(t){return t.dateCreated},sortReverse:!1}),this.sorts.push({label:"Date (descending)",predicate:function(t){return t.dateCreated},sortReverse:!0}),this.sorts.push({label:"Total Invested (ascending)",predicate:function(t){return t.totalInvested},sortReverse:!1}),this.sorts.push({label:"Total Invested (descending)",predicate:function(t){return t.totalInvested},sortReverse:!0}),this.selectedSort=this.sorts.filter(function(t){return"Id"==t.label})[0]},t.prototype.setupFilters=function(){var t=this;this.filters.idFilter=function(n){return!t.idFilter||n.investorId===+t.idFilter},this.filters.nameFilter=function(n){return!t.nameFilter||n.name.toLowerCase().indexOf(t.nameFilter.toLowerCase())>-1},this.filters.surnameFilter=function(n){return!t.surnameFilter||n.surname.toLowerCase().indexOf(t.surnameFilter.toLowerCase())>-1},this.filters.daterangeFilter=function(n){if(null===!t.dateFilter.startDate||null===t.dateFilter.endDate)return!0;var e=t.moment(n.dateCreated).toDate();return t.dateFilter.startDate.toDate()<=e&&t.dateFilter.endDate.toDate()>=e};for(var n=this.investors.reduce(function(t,n){return n.totalInvested>t?n.totalInvested:t},0),e=Math.ceil(n/1e4),r=0;r<e;r++)this.investmentAmounts.push({min:1e4*r,max:1e4*(r+1),display:10*r+"k - "+10*(r+1)+"k"});this.filters.investmentAmountFilter=function(n){return 0===t.investmentAmounts.length||(null===t.investmentAmountSelectedFilter||""===t.investmentAmountSelectedFilter||n.totalInvested>=t.investmentAmountSelectedFilter.min&&n.totalInvested<=t.investmentAmountSelectedFilter.max)},this.numOfAccountsList=this.investors.map(function(t){return t.numberOfAccounts}).filter(function(t,n,e){return e.indexOf(t)===n}).sort(function(t,n){return t-n}),this.filters.numOfAccounts=function(n){return null===t.numOfAccountsFilter||""===t.numOfAccountsFilter||+t.numOfAccountsFilter===n.numberOfAccounts}},t.prototype.clearCalendar=function(){var t=this;this.$timeout(function(){angular.element("[date-range-picker]").val(null),t.dateFilter={startDate:null,endDate:null}})},t.prototype.clearAccounts=function(){this.numOfAccountsFilter=null},t.prototype.clearInvested=function(){this.investmentAmountSelectedFilter=null},t}();e.$inject=["utility","$timeout"],angular.module("app").component("investorList",new n)}(App||(App={}));var App;!function(t){var n=function(){function t(){this.bindings={investors:"<"},this.controller=e,this.templateUrl="Components/Investors/investors.template.html"}return t}(),e=function(){function t(){}return t}();angular.module("app").component("investors",new n)}(App||(App={}));
//# sourceMappingURL=../maps/app.min.js.map
